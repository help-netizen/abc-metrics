# Настройка системы агентов для проекта ABC Metrics

## Статус: ✅ Подготовка завершена

Дата: 2025-01-XX

---

## Обзор

Проект ABC Metrics настроен для работы с системой агентов по следующему workflow:

**Product → Architect → Planner → Implementer → Tester → Reviewer**

Все агенты работают на основе единой базы знаний:
- `docs/requirements.md` - требования и фичи
- `docs/architecture.md` - архитектура и модули
- `docs/tasks.md` - активные задачи
- `docs/changelog.md` - история изменений

---

## Базовая документация

✅ Все базовые документы созданы и готовы к использованию:

1. **`docs/requirements.md`** - список всех функций проекта (35+ функций, от F001 до F035+)
   - Каждая функция имеет ID, статус (✅/⚠️/❌), описание, реализацию
   - Включает ограничения и известные проблемы

2. **`docs/architecture.md`** - полное описание архитектуры проекта
   - Модули и их ответственность
   - Основные сущности БД (fact/dim таблицы)
   - Ключевые функции и классы
   - Потоки данных

3. **`docs/tasks.md`** - активные задачи и TODO
   - 10+ задач с ID, статусами, приоритетами
   - Известные проблемы (P001-P003)
   - Разбивка по приоритетам

4. **`docs/changelog.md`** - история изменений
   - Основные изменения проекта с описанием причин
   - Затронутые файлы и модули

---

## Инструкции агентов

✅ Все инструкции агентов находятся в `docs/agents/`:

1. **`agent-orchestrator.md`** - инструкция для оркестратора
   - Управляет процессом работы всех агентов
   - Контролирует последовательность выполнения

2. **`agent-01-product-requirements.md`** - Product/Requirements Analyst
   - Формализует требования из свободного текста
   - Проверяет на дублирование существующих фич

3. **`agent-02-architect.md`** - Architect
   - Проектирует архитектурные решения
   - Предотвращает дублирование кода

4. **`agent-03-planner.md`** - Planner/Task Breakdown
   - Разбивает работу на маленькие задачи
   - Определяет порядок выполнения

5. **`agent-04-implementer.md`** - Implementer
   - Пишет/меняет код в рамках задачи
   - Расширяет существующий функционал

6. **`agent-05-tester.md`** - Tester
   - Добавляет/обновляет тесты
   - Проверяет покрытие сценариев

7. **`agent-06-reviewer.md`** - Reviewer/Guardian
   - Проводит код-ревью
   - Проверяет на дублирование и соответствие архитектуре

---

## Правила работы агентов

### Обязательное правило для ВСЕХ агентов:

**Перед любыми изменениями кода:**
1. Прочитать `docs/requirements.md`
2. Прочитать `docs/architecture.md`
3. Прочитать `docs/tasks.md`
4. Прочитать `docs/changelog.md`
5. **ПОТОМ** уже читать код

### Workflow выполнения задач:

```
User Request
    ↓
[1] Product Agent → формализует требования → обновляет requirements.md
    ↓
[2] Architect Agent → проектирует решение → обновляет architecture.md
    ↓
[3] Planner Agent → разбивает на задачи → обновляет tasks.md
    ↓
For each task:
    ↓
    [4] Implementer Agent → пишет код → применяется в проект
        ↓
    [5] Tester Agent → добавляет тесты → применяется в проект
        ↓
    [6] Reviewer Agent → проверяет код → вердикт (OK / ИСПРАВЛЕНИЯ)
        ↓
    (Если OK → следующая задача; если ИСПРАВЛЕНИЯ → вернуться к Implementer)
    ↓
[7] Обновление changelog.md
```

---

## Интеграция с существующим проектом

### Структура проекта:

```
abc-metrics/
├── docs/
│   ├── requirements.md       ← Source of truth для требований
│   ├── architecture.md       ← Source of truth для архитектуры
│   ├── tasks.md              ← Source of truth для задач
│   ├── changelog.md          ← История изменений
│   └── agents/               ← Инструкции для агентов
│       ├── agent-orchestrator.md
│       ├── agent-01-product-requirements.md
│       ├── agent-02-architect.md
│       ├── agent-03-planner.md
│       ├── agent-04-implementer.md
│       ├── agent-05-tester.md
│       ├── agent-06-reviewer.md
│       ├── Project-Rules.md
│       └── README.md
├── src/                      ← Исходный код проекта
└── ...
```

### Связь документации с кодом:

- **requirements.md** ссылается на конкретные файлы реализации (например, `src/services/svc-workiz-jobs.ts`)
- **architecture.md** описывает структуру модулей и их взаимодействие
- **tasks.md** содержит задачи с указанием затронутых файлов
- **changelog.md** документирует изменения с указанием файлов

---

## Готовность к работе

✅ **Проект готов к работе агентов:**

1. ✅ Базовая документация создана и структурирована
2. ✅ Инструкции для всех агентов подготовлены
3. ✅ Правила работы агентов определены
4. ✅ Workflow описан и задокументирован
5. ✅ Связь между документацией и кодом установлена

---

## Следующие шаги

Для начала работы с агентами:

1. **Определить задачу** - сформулировать запрос в свободной форме на русском языке
2. **Запустить оркестратора** - он управляет процессом работы всех агентов
3. **Следовать workflow** - Product → Architect → Planner → Implementer → Tester → Reviewer

Пример запроса:
```
"Добавить возможность фильтрации метрик по источникам в API"
```

Оркестратор автоматически направит запрос через всех агентов по порядку.

---

## Примечания

- Все документы должны обновляться агентами в процессе работы
- Каждый агент ОБЯЗАН читать базовые документы перед началом работы
- Дублирование функционала строго запрещено
- Каждая задача должна быть достаточно маленькой (1-3 файла)

---

## Контакты и поддержка

При возникновении вопросов или проблем при работе агентов:
1. Проверить соответствие инструкциям в `docs/agents/`
2. Убедиться, что все базовые документы прочитаны
3. Следовать правилам из `docs/agents/Project-Rules.md`



